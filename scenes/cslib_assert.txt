*bug "cslib_assert is a cslib module and must not be accessed directly"

*label strings_not_empty
*params
*if not(cslib_assert)
	*return
*temp len param_count
*label _strings_not_zero_loop
*if (len > 0)
	*temp value param[len]
	*gosub string_not_empty value
	*set len - 1
	*goto _strings_not_zero_loop
*set cslib_ret true
*return

*label string_not_empty
*params string
*if not(cslib_assert)
	*return
*gosub is_string
*if (string = "")
	*bug "cslib.assert: string_not_empty"
*set cslib_ret true
*return

*label numbers_not_zero
*params
*if not(cslib_assert)
	*return
*temp len param_count
*label _numbers_not_zero_loop
*if (len > 0)
	*temp value param[len]
	*gosub number_not_zero value
	*set len - 1
	*goto _numbers_not_zero_loop
*set cslib_ret true
*return

*label number_not_zero
*params value
*if not(cslib_assert)
	*return
*if (value = 0)
	*bug "cslib.assert: number_not_zero"
*set cslib_ret true
*return

*label less_or_equal_to
*params value constraint
*if not(cslib_assert)
	*return
*elseif (value > constraint)
	*bug "${value} is > ${constraint}"
*else
	*return

*label greater_or_equal_to
*params value constraint
*if not(cslib_assert)
	*return
*elseif (value < constraint)
	*bug "${value} is < ${constraint}"
*else
	*return

*label is_string
*params value
*if not(cslib_assert)
	*return
*temp str ""
*set str &value
*return

*label custom
*params expr msg
*if not(expr)
	*bug "${msg}"
*set cslib_ret true
*return